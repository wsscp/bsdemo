CREATE OR REPLACE PROCEDURE "DELETE_EVENT_PROCESS" (EVENT_ID IN VARCHAR2,EVENT_TYPE_ID IN VARCHAR2)
AS
PRO_ID T_EVE_EVENT_PROCESS."ID"%TYPE;
PRO_SEQ T_EVE_EVENT_PROCESS."PROCESS_SEQ"%TYPE;
CURSOR EVENTPROCESS IS SELECT d."ID"
    FROM T_EVE_EVENT_PROCESS d
  WHERE d.PROCESS_SEQ>PRO_SEQ AND d.EVENT_TYPE_ID=EVENT_TYPE_ID;
BEGIN
  SELECT PROCESS_SEQ INTO PRO_SEQ  FROM T_EVE_EVENT_PROCESS  WHERE "ID" = EVENT_ID;
OPEN EVENTPROCESS;
LOOP
FETCH EVENTPROCESS INTO PRO_ID;
EXIT WHEN EVENTPROCESS%NOTFOUND;
  --修改事件步骤
  UPDATE T_EVE_EVENT_PROCESS a SET a.PROCESS_SEQ=PROCESS_SEQ-1,a.MODIFY_TIME=SYSDATE WHERE a.ID=PRO_ID AND STATUS='1';
END LOOP;
CLOSE EVENTPROCESS;
  --修改事件状态
  UPDATE T_EVE_EVENT_PROCESS SET STATUS='0' WHERE "ID" = EVENT_ID ;
END;
